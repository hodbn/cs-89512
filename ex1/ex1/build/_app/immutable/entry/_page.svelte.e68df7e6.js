import{S as rl,i as ll,s as ol,k as l,q as f,a as u,l as o,m as i,r as h,h as r,c,n,b as ts,D as e,J as He,K as $,L as nl,u as Ee,M as il,H as ar,N as al,O as D,P as dl,w as ul,y as cl,Q as gl,z as fl,A as hl,g as pl,d as vl,B as ml}from"../chunks/index.01a7223d.js";function tl(d,t,s){const E=d.slice();return E[48]=t[s],E[50]=s,E}function sl(d,t){let s,E,V;function K(){return t[30](t[50])}function p(){return t[31](t[50])}return{key:d,first:null,c(){s=l("div"),this.h()},l(b){s=o(b,"DIV",{class:!0}),i(s).forEach(r),this.h()},h(){var b,_,ee,P,U,N,R,B;n(s,"class","w-1.5 h-1.5"),D(s,"bg-white",t[48]===void 0),D(s,"bg-gray-100",((b=t[48])==null?void 0:b.kind)===t[15].S1&&!t[48].willGossip),D(s,"bg-gray-200",((_=t[48])==null?void 0:_.kind)===t[15].S2&&!t[48].willGossip),D(s,"bg-gray-300",((ee=t[48])==null?void 0:ee.kind)===t[15].S3&&!t[48].willGossip),D(s,"bg-gray-400",((P=t[48])==null?void 0:P.kind)===t[15].S4&&!t[48].willGossip),D(s,"bg-red-300",((U=t[48])==null?void 0:U.kind)===t[15].S1&&t[48].willGossip),D(s,"bg-red-400",((N=t[48])==null?void 0:N.kind)===t[15].S2&&t[48].willGossip),D(s,"bg-red-500",((R=t[48])==null?void 0:R.kind)===t[15].S3&&t[48].willGossip),D(s,"bg-red-600",((B=t[48])==null?void 0:B.kind)===t[15].S4&&t[48].willGossip),this.first=s},m(b,_){ts(b,s,_),E||(V=[$(s,"mouseover",K),$(s,"focus",p)],E=!0)},p(b,_){var ee,P,U,N,R,B,F,Y;t=b,_[0]&32&&D(s,"bg-white",t[48]===void 0),_[0]&32800&&D(s,"bg-gray-100",((ee=t[48])==null?void 0:ee.kind)===t[15].S1&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-200",((P=t[48])==null?void 0:P.kind)===t[15].S2&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-300",((U=t[48])==null?void 0:U.kind)===t[15].S3&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-400",((N=t[48])==null?void 0:N.kind)===t[15].S4&&!t[48].willGossip),_[0]&32800&&D(s,"bg-red-300",((R=t[48])==null?void 0:R.kind)===t[15].S1&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-400",((B=t[48])==null?void 0:B.kind)===t[15].S2&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-500",((F=t[48])==null?void 0:F.kind)===t[15].S3&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-600",((Y=t[48])==null?void 0:Y.kind)===t[15].S4&&t[48].willGossip)},d(b){b&&r(s),E=!1,al(V)}}}function bl(d){var cr;let t,s,E,V,K,p,b,_,ee,P,U,N,R,B,F,Y,A,Pe,J,X,ye,Q,L,we,te,M,O,ue,ce,W,Tt,C,Se,Te,Ie,ge,fe=d[14]===d[17].ALIVE?"Alive":"Ended",Fe,It,Me,re,Oe=d[14]===d[17].INITIAL?"Start":"Restart",Je,xt,se,xe,Gt,kt,he,Ue=(d[1]*100).toFixed(2)+"",a,S,I,w,y,x,G,j,pe,m,k,Be,je,ss,ve,Xe,rs,ls,Qe,Lt,os,Dt,le,ns,Ct,as,me,We,is,ds,Ye,Ge,oe,us,Ze,cs,gs,Vt,ne,Nt=d[12]?"Pause":"Run",Ht,Pt,fs,be,$e,hs,ps,et,Mt,vs,Ot,ms,_e,tt,bs,_s,ke,Rt=(((cr=d[5][d[4]])==null?void 0:cr.kind)??"Empty")+"",Ut,Es,At=d[16](d[4])+"",Bt,ys,jt,ws,De,st,Ss,Ts,Ve,Is,xs,Ne,Gs,Re,rt,ks,Ds,ze,Ae,Vs,Ns,Le,Rs,As,qe,Ls,ae,lt,Cs,Hs,Ce,z,ot,Ps,Ms,nt,Os,Us,at,Bs,js,it,zs,qs,dt,Ks,Fs,q,ut,Js,Xs,ct,Qs,Ws,gt,Ys,Zs,ft,$s,er,ht,tr,sr,Ke,Z=[],ir=new Map,rr,dr,zt=d[5];const ur=g=>g[50];for(let g=0;g<zt.length;g+=1){let v=tl(d,zt,g),T=ur(v);ir.set(T,Z[g]=sl(T,v))}return{c(){t=l("div"),s=l("div"),E=l("h1"),V=f("Controls"),K=u(),p=l("table"),b=l("tr"),_=l("th"),ee=f("Game params"),P=u(),U=l("td"),N=l("div"),R=l("div"),B=l("span"),F=f("P ="),Y=u(),A=l("input"),Pe=u(),J=l("div"),X=l("span"),ye=f("L ="),Q=u(),L=l("input"),we=u(),te=l("td"),M=l("div"),O=l("span"),ue=f("MaxGen ="),ce=u(),W=l("input"),Tt=u(),C=l("tr"),Se=l("th"),Te=f("Game state"),Ie=u(),ge=l("td"),Fe=f(fe),It=u(),Me=l("td"),re=l("button"),Je=f(Oe),xt=u(),se=l("tr"),xe=l("th"),Gt=f("Exposure rate"),kt=u(),he=l("td"),a=f(Ue),S=f("%"),I=u(),w=l("td"),y=u(),x=l("tr"),G=l("th"),j=f("Game number"),pe=u(),m=l("td"),k=f(d[3]),Be=u(),je=l("td"),ss=u(),ve=l("tr"),Xe=l("th"),rs=f("Generation"),ls=u(),Qe=l("td"),Lt=f(d[2]),os=u(),Dt=l("td"),le=l("button"),ns=f("Single step"),as=u(),me=l("tr"),We=l("th"),is=f("Run interval"),ds=u(),Ye=l("td"),Ge=l("div"),oe=l("input"),us=u(),Ze=l("span"),cs=f("ms"),gs=u(),Vt=l("td"),ne=l("button"),Ht=f(Nt),fs=u(),be=l("tr"),$e=l("th"),hs=f("Active gossipers"),ps=u(),et=l("td"),Mt=f(d[0]),vs=u(),Ot=l("td"),ms=u(),_e=l("tr"),tt=l("th"),bs=f("Selected cell"),_s=u(),ke=l("td"),Ut=f(Rt),Es=u(),Bt=f(At),ys=u(),jt=l("td"),ws=u(),De=l("div"),st=l("h1"),Ss=f("Message log"),Ts=u(),Ve=l("button"),Is=f("Clear"),xs=u(),Ne=l("textarea"),Gs=u(),Re=l("div"),rt=l("h1"),ks=f("Last game result"),Ds=u(),ze=l("div"),Ae=l("button"),Vs=f("Copy"),Ns=u(),Le=l("button"),Rs=f("Clear"),As=u(),qe=l("textarea"),Ls=u(),ae=l("div"),lt=l("h1"),Cs=f("Legend"),Hs=u(),Ce=l("div"),z=l("div"),ot=l("div"),Ps=f("General population:"),Ms=u(),nt=l("div"),Os=f("S1"),Us=u(),at=l("div"),Bs=f("S2"),js=u(),it=l("div"),zs=f("S3"),qs=u(),dt=l("div"),Ks=f("S4"),Fs=u(),q=l("div"),ut=l("div"),Js=f("Gossipers:"),Xs=u(),ct=l("div"),Qs=f("S1"),Ws=u(),gt=l("div"),Ys=f("S2"),Zs=u(),ft=l("div"),$s=f("S3"),er=u(),ht=l("div"),tr=f("S4"),sr=u(),Ke=l("div");for(let g=0;g<Z.length;g+=1)Z[g].c();this.h()},l(g){t=o(g,"DIV",{class:!0});var v=i(t);s=o(v,"DIV",{class:!0});var T=i(s);E=o(T,"H1",{class:!0});var gr=i(E);V=h(gr,"Controls"),gr.forEach(r),K=c(T),p=o(T,"TABLE",{class:!0});var H=i(p);b=o(H,"TR",{});var pt=i(b);_=o(pt,"TH",{class:!0});var fr=i(_);ee=h(fr,"Game params"),fr.forEach(r),P=c(pt),U=o(pt,"TD",{class:!0});var hr=i(U);N=o(hr,"DIV",{class:!0});var qt=i(N);R=o(qt,"DIV",{class:!0});var Kt=i(R);B=o(Kt,"SPAN",{class:!0});var pr=i(B);F=h(pr,"P ="),pr.forEach(r),Y=c(Kt),A=o(Kt,"INPUT",{type:!0,class:!0,placeholder:!0}),Kt.forEach(r),Pe=c(qt),J=o(qt,"DIV",{class:!0});var Ft=i(J);X=o(Ft,"SPAN",{class:!0});var vr=i(X);ye=h(vr,"L ="),vr.forEach(r),Q=c(Ft),L=o(Ft,"INPUT",{type:!0,class:!0,placeholder:!0}),Ft.forEach(r),qt.forEach(r),hr.forEach(r),we=c(pt),te=o(pt,"TD",{});var mr=i(te);M=o(mr,"DIV",{class:!0});var Jt=i(M);O=o(Jt,"SPAN",{class:!0});var br=i(O);ue=h(br,"MaxGen ="),br.forEach(r),ce=c(Jt),W=o(Jt,"INPUT",{type:!0,class:!0,placeholder:!0}),Jt.forEach(r),mr.forEach(r),pt.forEach(r),Tt=c(H),C=o(H,"TR",{});var vt=i(C);Se=o(vt,"TH",{class:!0});var _r=i(Se);Te=h(_r,"Game state"),_r.forEach(r),Ie=c(vt),ge=o(vt,"TD",{class:!0});var Er=i(ge);Fe=h(Er,fe),Er.forEach(r),It=c(vt),Me=o(vt,"TD",{});var yr=i(Me);re=o(yr,"BUTTON",{type:!0,class:!0});var wr=i(re);Je=h(wr,Oe),wr.forEach(r),yr.forEach(r),vt.forEach(r),xt=c(H),se=o(H,"TR",{});var mt=i(se);xe=o(mt,"TH",{class:!0});var Sr=i(xe);Gt=h(Sr,"Exposure rate"),Sr.forEach(r),kt=c(mt),he=o(mt,"TD",{class:!0});var lr=i(he);a=h(lr,Ue),S=h(lr,"%"),lr.forEach(r),I=c(mt),w=o(mt,"TD",{}),i(w).forEach(r),mt.forEach(r),y=c(H),x=o(H,"TR",{});var bt=i(x);G=o(bt,"TH",{class:!0});var Tr=i(G);j=h(Tr,"Game number"),Tr.forEach(r),pe=c(bt),m=o(bt,"TD",{class:!0});var Ir=i(m);k=h(Ir,d[3]),Ir.forEach(r),Be=c(bt),je=o(bt,"TD",{}),i(je).forEach(r),bt.forEach(r),ss=c(H),ve=o(H,"TR",{});var _t=i(ve);Xe=o(_t,"TH",{class:!0});var xr=i(Xe);rs=h(xr,"Generation"),xr.forEach(r),ls=c(_t),Qe=o(_t,"TD",{class:!0});var Gr=i(Qe);Lt=h(Gr,d[2]),Gr.forEach(r),os=c(_t),Dt=o(_t,"TD",{});var kr=i(Dt);le=o(kr,"BUTTON",{type:!0,class:!0});var Dr=i(le);ns=h(Dr,"Single step"),Dr.forEach(r),kr.forEach(r),_t.forEach(r),as=c(H),me=o(H,"TR",{});var Et=i(me);We=o(Et,"TH",{class:!0});var Vr=i(We);is=h(Vr,"Run interval"),Vr.forEach(r),ds=c(Et),Ye=o(Et,"TD",{class:!0});var Nr=i(Ye);Ge=o(Nr,"DIV",{class:!0});var Xt=i(Ge);oe=o(Xt,"INPUT",{type:!0,class:!0,placeholder:!0}),us=c(Xt),Ze=o(Xt,"SPAN",{class:!0});var Rr=i(Ze);cs=h(Rr,"ms"),Rr.forEach(r),Xt.forEach(r),Nr.forEach(r),gs=c(Et),Vt=o(Et,"TD",{});var Ar=i(Vt);ne=o(Ar,"BUTTON",{type:!0,class:!0});var Lr=i(ne);Ht=h(Lr,Nt),Lr.forEach(r),Ar.forEach(r),Et.forEach(r),fs=c(H),be=o(H,"TR",{});var yt=i(be);$e=o(yt,"TH",{class:!0});var Cr=i($e);hs=h(Cr,"Active gossipers"),Cr.forEach(r),ps=c(yt),et=o(yt,"TD",{class:!0});var Hr=i(et);Mt=h(Hr,d[0]),Hr.forEach(r),vs=c(yt),Ot=o(yt,"TD",{}),i(Ot).forEach(r),yt.forEach(r),ms=c(H),_e=o(H,"TR",{});var wt=i(_e);tt=o(wt,"TH",{class:!0});var Pr=i(tt);bs=h(Pr,"Selected cell"),Pr.forEach(r),_s=c(wt),ke=o(wt,"TD",{class:!0});var Qt=i(ke);Ut=h(Qt,Rt),Es=c(Qt),Bt=h(Qt,At),Qt.forEach(r),ys=c(wt),jt=o(wt,"TD",{}),i(jt).forEach(r),wt.forEach(r),H.forEach(r),ws=c(T),De=o(T,"DIV",{class:!0});var Wt=i(De);st=o(Wt,"H1",{class:!0});var Mr=i(st);Ss=h(Mr,"Message log"),Mr.forEach(r),Ts=c(Wt),Ve=o(Wt,"BUTTON",{type:!0,class:!0});var Or=i(Ve);Is=h(Or,"Clear"),Or.forEach(r),Wt.forEach(r),xs=c(T),Ne=o(T,"TEXTAREA",{class:!0}),i(Ne).forEach(r),Gs=c(T),Re=o(T,"DIV",{class:!0});var Yt=i(Re);rt=o(Yt,"H1",{class:!0});var Ur=i(rt);ks=h(Ur,"Last game result"),Ur.forEach(r),Ds=c(Yt),ze=o(Yt,"DIV",{});var Zt=i(ze);Ae=o(Zt,"BUTTON",{type:!0,class:!0});var Br=i(Ae);Vs=h(Br,"Copy"),Br.forEach(r),Ns=c(Zt),Le=o(Zt,"BUTTON",{type:!0,class:!0});var jr=i(Le);Rs=h(jr,"Clear"),jr.forEach(r),Zt.forEach(r),Yt.forEach(r),As=c(T),qe=o(T,"TEXTAREA",{class:!0}),i(qe).forEach(r),T.forEach(r),Ls=c(v),ae=o(v,"DIV",{class:!0});var St=i(ae);lt=o(St,"H1",{class:!0});var zr=i(lt);Cs=h(zr,"Legend"),zr.forEach(r),Hs=c(St),Ce=o(St,"DIV",{class:!0});var $t=i(Ce);z=o($t,"DIV",{class:!0});var ie=i(z);ot=o(ie,"DIV",{class:!0});var qr=i(ot);Ps=h(qr,"General population:"),qr.forEach(r),Ms=c(ie),nt=o(ie,"DIV",{class:!0});var Kr=i(nt);Os=h(Kr,"S1"),Kr.forEach(r),Us=c(ie),at=o(ie,"DIV",{class:!0});var Fr=i(at);Bs=h(Fr,"S2"),Fr.forEach(r),js=c(ie),it=o(ie,"DIV",{class:!0});var Jr=i(it);zs=h(Jr,"S3"),Jr.forEach(r),qs=c(ie),dt=o(ie,"DIV",{class:!0});var Xr=i(dt);Ks=h(Xr,"S4"),Xr.forEach(r),ie.forEach(r),Fs=c($t),q=o($t,"DIV",{class:!0});var de=i(q);ut=o(de,"DIV",{class:!0});var Qr=i(ut);Js=h(Qr,"Gossipers:"),Qr.forEach(r),Xs=c(de),ct=o(de,"DIV",{class:!0});var Wr=i(ct);Qs=h(Wr,"S1"),Wr.forEach(r),Ws=c(de),gt=o(de,"DIV",{class:!0});var Yr=i(gt);Ys=h(Yr,"S2"),Yr.forEach(r),Zs=c(de),ft=o(de,"DIV",{class:!0});var Zr=i(ft);$s=h(Zr,"S3"),Zr.forEach(r),er=c(de),ht=o(de,"DIV",{class:!0});var $r=i(ht);tr=h($r,"S4"),$r.forEach(r),de.forEach(r),$t.forEach(r),sr=c(St),Ke=o(St,"DIV",{class:!0});var el=i(Ke);for(let or=0;or<Z.length;or+=1)Z[or].l(el);el.forEach(r),St.forEach(r),v.forEach(r),this.h()},h(){n(E,"class","text-lg"),n(_,"class","text-start"),n(B,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(A,"type","text"),n(A,"class","block w-10 min-w-[2rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(A,"placeholder","Density"),n(R,"class","flex rounded-md shadow-sm flex-grow"),n(X,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(L,"type","text"),n(L,"class","block w-10 min-w-[1rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(L,"placeholder","Cooldown"),n(J,"class","flex rounded-md shadow-sm flex-grow"),n(N,"class","flex justify-between space-x-2"),n(U,"class","text-end"),n(O,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(W,"type","number"),n(W,"class","block w-10 min-w-[3rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(W,"placeholder","Cooldown"),n(M,"class","flex rounded-md shadow-sm"),n(Se,"class","text-start"),n(ge,"class","text-end"),n(re,"type","button"),n(re,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(xe,"class","text-start"),n(he,"class","text-end"),n(G,"class","text-start"),n(m,"class","text-end"),n(Xe,"class","text-start"),n(Qe,"class","text-end"),n(le,"type","button"),n(le,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),le.disabled=Ct=d[14]!==d[17].ALIVE,n(We,"class","text-start"),n(oe,"type","text"),n(oe,"class","block w-6 flex-1 rounded-none rounded-l-md text-end border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(oe,"placeholder","interval"),n(Ze,"class","inline-flex items-center rounded-r-md border border-l-0 border-gray-300 px-3 text-gray-500 text-xs"),n(Ge,"class","flex rounded-md shadow-sm"),n(Ye,"class","text-end"),n(ne,"type","button"),n(ne,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),ne.disabled=Pt=d[14]!==d[17].ALIVE,n($e,"class","text-start"),n(et,"class","text-end"),n(tt,"class","text-start"),n(ke,"class","text-end min-w-[6rem] font-mono"),n(p,"class","border-spacing-2 border-separate"),n(st,"class","text-lg"),n(Ve,"type","button"),n(Ve,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(De,"class","flex justify-between"),n(Ne,"class","h-full min-w-[30rem] font-mono flex-grow block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),Ne.value=d[10],n(rt,"class","text-lg"),n(Ae,"type","button"),n(Ae,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(Le,"type","button"),n(Le,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(Re,"class","flex justify-between"),n(qe,"class","h-full min-w-[30rem] font-mono flex-grow block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),qe.value=d[9],n(s,"class","flex flex-col space-y-2"),n(lt,"class","text-lg"),n(ot,"class","mr-2"),n(nt,"class","px-1 bg-gray-100"),n(at,"class","px-1 bg-gray-200"),n(it,"class","px-1 bg-gray-300"),n(dt,"class","px-1 bg-gray-400"),n(z,"class","flex"),n(ut,"class","mr-2"),n(ct,"class","px-1 bg-red-300"),n(gt,"class","px-1 bg-red-400"),n(ft,"class","px-1 bg-red-500"),n(ht,"class","px-1 bg-red-600"),n(q,"class","flex"),n(Ce,"class","flex space-x-4 text-sm"),n(Ke,"class","grid gap-0.5 grid-cols-[repeat(100,_minmax(0,_1fr))] grid-rows-[repeat(100,_minmax(0,_1fr))] bg-white border border-gray-500 shadow-xl text-xs"),n(ae,"class","flex flex-col space-y-2"),n(t,"class","w-full flex justify-between")},m(g,v){ts(g,t,v),e(t,s),e(s,E),e(E,V),e(s,K),e(s,p),e(p,b),e(b,_),e(_,ee),e(b,P),e(b,U),e(U,N),e(N,R),e(R,B),e(B,F),e(R,Y),e(R,A),He(A,d[6]),e(N,Pe),e(N,J),e(J,X),e(X,ye),e(J,Q),e(J,L),He(L,d[7]),e(b,we),e(b,te),e(te,M),e(M,O),e(O,ue),e(M,ce),e(M,W),He(W,d[8]),e(p,Tt),e(p,C),e(C,Se),e(Se,Te),e(C,Ie),e(C,ge),e(ge,Fe),e(C,It),e(C,Me),e(Me,re),e(re,Je),e(p,xt),e(p,se),e(se,xe),e(xe,Gt),e(se,kt),e(se,he),e(he,a),e(he,S),e(se,I),e(se,w),e(p,y),e(p,x),e(x,G),e(G,j),e(x,pe),e(x,m),e(m,k),e(x,Be),e(x,je),e(p,ss),e(p,ve),e(ve,Xe),e(Xe,rs),e(ve,ls),e(ve,Qe),e(Qe,Lt),e(ve,os),e(ve,Dt),e(Dt,le),e(le,ns),e(p,as),e(p,me),e(me,We),e(We,is),e(me,ds),e(me,Ye),e(Ye,Ge),e(Ge,oe),He(oe,d[13]),e(Ge,us),e(Ge,Ze),e(Ze,cs),e(me,gs),e(me,Vt),e(Vt,ne),e(ne,Ht),e(p,fs),e(p,be),e(be,$e),e($e,hs),e(be,ps),e(be,et),e(et,Mt),e(be,vs),e(be,Ot),e(p,ms),e(p,_e),e(_e,tt),e(tt,bs),e(_e,_s),e(_e,ke),e(ke,Ut),e(ke,Es),e(ke,Bt),e(_e,ys),e(_e,jt),e(s,ws),e(s,De),e(De,st),e(st,Ss),e(De,Ts),e(De,Ve),e(Ve,Is),e(s,xs),e(s,Ne),d[29](Ne),e(s,Gs),e(s,Re),e(Re,rt),e(rt,ks),e(Re,Ds),e(Re,ze),e(ze,Ae),e(Ae,Vs),e(ze,Ns),e(ze,Le),e(Le,Rs),e(s,As),e(s,qe),e(t,Ls),e(t,ae),e(ae,lt),e(lt,Cs),e(ae,Hs),e(ae,Ce),e(Ce,z),e(z,ot),e(ot,Ps),e(z,Ms),e(z,nt),e(nt,Os),e(z,Us),e(z,at),e(at,Bs),e(z,js),e(z,it),e(it,zs),e(z,qs),e(z,dt),e(dt,Ks),e(Ce,Fs),e(Ce,q),e(q,ut),e(ut,Js),e(q,Xs),e(q,ct),e(ct,Qs),e(q,Ws),e(q,gt),e(gt,Ys),e(q,Zs),e(q,ft),e(ft,$s),e(q,er),e(q,ht),e(ht,tr),e(ae,sr),e(ae,Ke);for(let T=0;T<Z.length;T+=1)Z[T]&&Z[T].m(Ke,null);rr||(dr=[$(A,"input",d[25]),$(L,"input",d[26]),$(W,"input",d[27]),$(re,"click",d[18]),$(le,"click",d[19]),$(oe,"input",d[28]),$(ne,"click",d[20]),$(Ve,"click",d[21]),$(Ae,"click",d[23]),$(Le,"click",d[22])],rr=!0)},p(g,v){var T;v[0]&64&&A.value!==g[6]&&He(A,g[6]),v[0]&128&&L.value!==g[7]&&He(L,g[7]),v[0]&256&&nl(W.value)!==g[8]&&He(W,g[8]),v[0]&16384&&fe!==(fe=g[14]===g[17].ALIVE?"Alive":"Ended")&&Ee(Fe,fe),v[0]&16384&&Oe!==(Oe=g[14]===g[17].INITIAL?"Start":"Restart")&&Ee(Je,Oe),v[0]&2&&Ue!==(Ue=(g[1]*100).toFixed(2)+"")&&Ee(a,Ue),v[0]&8&&Ee(k,g[3]),v[0]&4&&Ee(Lt,g[2]),v[0]&16384&&Ct!==(Ct=g[14]!==g[17].ALIVE)&&(le.disabled=Ct),v[0]&8192&&oe.value!==g[13]&&He(oe,g[13]),v[0]&4096&&Nt!==(Nt=g[12]?"Pause":"Run")&&Ee(Ht,Nt),v[0]&16384&&Pt!==(Pt=g[14]!==g[17].ALIVE)&&(ne.disabled=Pt),v[0]&1&&Ee(Mt,g[0]),v[0]&48&&Rt!==(Rt=(((T=g[5][g[4]])==null?void 0:T.kind)??"Empty")+"")&&Ee(Ut,Rt),v[0]&16&&At!==(At=g[16](g[4])+"")&&Ee(Bt,At),v[0]&1024&&(Ne.value=g[10]),v[0]&512&&(qe.value=g[9]),v[0]&32816&&(zt=g[5],Z=il(Z,v,ur,1,g,zt,ir,Ke,dl,sl,null,tl))},i:ar,o:ar,d(g){g&&r(t),d[29](null);for(let v=0;v<Z.length;v+=1)Z[v].d();rr=!1,al(dr)}}}const es=100,nr=100;function _l(d,t,s){const E=a=>a[Math.floor(a.length*Math.random())];var V=(a=>(a.S1="S1",a.S2="S2",a.S3="S3",a.S4="S4",a))(V||{});const K=a=>{const S=(G,j)=>{const pe=()=>Math.random()<j,m=()=>E(["S1","S2","S3","S4"]),k=()=>({kind:m(),willGossip:!1,cooldown:0,exposed:!1});return new Array(G).fill(void 0).map(()=>pe()?k():void 0)},I=G=>{const j=G.reduce((pe,m)=>m===void 0?pe:[...pe,m],[]);return E(j)},w=es*nr,y=S(w,a),x=I(y);return x.willGossip=!0,x.exposed=!0,y},p=a=>[a%es,Math.floor(a/nr)],b=a=>{const S=I=>I.toString().padStart(2," ");return`[${S(a[0])},${S(a[1])}]`},_=a=>b(p(a)),ee=a=>{const S=([G,j])=>G>=0&&j>=0&&G<es&&j<nr,I=([G,j])=>j*es+G,[w,y]=p(a);return[[w-1,y-1],[w,y-1],[w+1,y-1],[w-1,y+0],[w+1,y+0],[w-1,y+1],[w,y+1],[w+1,y+1]].filter(S).map(I)},P=a=>a!==void 0,U=(a,S)=>{const I={S1:1,S2:.6666666666666666,S3:.3333333333333333,S4:0},y=S?{S1:"S1",S2:"S1",S3:"S2",S4:"S3"}[a.kind]:a.kind;return I[y]},N=(a,S)=>P(a[S]),R=(a,S)=>Math.random()<=U(a,S>=2),B=(a,S)=>{const I=(m,k)=>P(m)&&m.willGossip?[k]:[],w=m=>ee(m).filter(je=>N(a,je)),y=(m,k,Be)=>Be===0?!1:(!m.willGossip||S===0)&&m.cooldown===0&&R(m,Be),x=a.flatMap(I),G=x.flatMap(w),j=G.reduce((m,k)=>(m[k]=(m[k]||0)+1,m),{});return{nextState:a.map((m,k)=>P(m)?{...m,willGossip:y(m,k,j[k]??0),cooldown:x.includes(k)?S:Math.max(0,m.cooldown-1),exposed:m.exposed||G.includes(k)}:void 0),numGossipers:x.length}};let F=.5,Y=3,A=100,Pe=[],J="",{activeGossipers:X}=t,{exposureRate:ye=0}=t,{generation:Q=0}=t,{gameNumber:L=0}=t,{selectedIndex:we=0}=t,te=K(F),{playHandle:M=-1}=t,O="",ue;const ce=a=>{const S=`game=${L} gen=${Q} | ${a}`,I=10*1e3;if(O.length>I){const w=O.substr(-I),y=w.indexOf(`
`);y!==-1&&s(10,O=w.substr(y))}O!==""&&s(10,O+=`
`),s(10,O+=S),setTimeout(()=>{ue.scroll({top:ue.scrollHeight,behavior:"instant"})})},W=()=>{const{nextState:a,numGossipers:S}=B(te,Y),I=a.filter(P),w=I.length,y=I.filter(x=>x.exposed);s(1,ye=y.length/w),Pe.push({generation:Q,numGossipers:S,totalExposed:y.length}),s(5,te=a),s(2,Q++,Q),setTimeout(()=>{ce(`active gossipers: ${X}`),(X===0||Q===A)&&(Ie(!1),s(14,fe=2),s(9,J=JSON.stringify({l:Y,p:F,totalPopulation:w,activeGossipers:X,generation:Q,maxGen:A,history:Pe},null,2)),Pe=[],ce("game ended"))})},Tt=()=>{s(3,L++,L),s(2,Q=0),s(1,ye=0),s(5,te=K(F)),ce("game restarted")};let C;const Se=()=>{ce(C===!0?"game paused":"game continued"),Ie(!C)};let Te=500;const Ie=a=>{a===!0?C||s(24,M=setInterval(()=>{W()},Te)):C&&(clearInterval(M),s(24,M=-1))};var ge=(a=>(a[a.INITIAL=0]="INITIAL",a[a.ALIVE=1]="ALIVE",a[a.END=2]="END",a))(ge||{});let fe=1;const Fe=()=>{Ie(!1),Tt(),s(14,fe=1)},It=()=>{Ie(!1),W()},Me=()=>{Se()},re=()=>{s(10,O="")},Oe=()=>{s(9,J="")},Je=()=>{navigator.clipboard.writeText(J)};function xt(){F=this.value,s(6,F)}function se(){Y=this.value,s(7,Y)}function xe(){A=nl(this.value),s(8,A)}function Gt(){Te=this.value,s(13,Te)}function kt(a){ul[a?"unshift":"push"](()=>{ue=a,s(11,ue)})}const he=a=>{s(4,we=a)},Ue=a=>{s(4,we=a)};return d.$$set=a=>{"activeGossipers"in a&&s(0,X=a.activeGossipers),"exposureRate"in a&&s(1,ye=a.exposureRate),"generation"in a&&s(2,Q=a.generation),"gameNumber"in a&&s(3,L=a.gameNumber),"selectedIndex"in a&&s(4,we=a.selectedIndex),"playHandle"in a&&s(24,M=a.playHandle)},d.$$.update=()=>{d.$$.dirty[0]&32&&s(0,X=te.filter(a=>P(a)&&a.willGossip===!0).length),d.$$.dirty[0]&16777216&&s(12,C=M!==-1)},[X,ye,Q,L,we,te,F,Y,A,J,O,ue,C,Te,fe,V,_,ge,Fe,It,Me,re,Oe,Je,M,xt,se,xe,Gt,kt,he,Ue]}class El extends rl{constructor(t){super(),ll(this,t,_l,bl,ol,{activeGossipers:0,exposureRate:1,generation:2,gameNumber:3,selectedIndex:4,playHandle:24},null,[-1,-1])}}function yl(d){let t,s,E,V,K;return V=new El({}),{c(){t=l("link"),s=u(),E=l("section"),cl(V.$$.fragment),this.h()},l(p){const b=gl("svelte-tqzk4c",document.head);t=o(b,"LINK",{rel:!0,href:!0}),b.forEach(r),s=c(p),E=o(p,"SECTION",{class:!0});var _=i(E);fl(V.$$.fragment,_),_.forEach(r),this.h()},h(){document.title="Game of Gossip",n(t,"rel","stylesheet"),n(t,"href","https://rsms.me/inter/inter.css"),n(E,"class","svelte-7w87tm")},m(p,b){e(document.head,t),ts(p,s,b),ts(p,E,b),hl(V,E,null),K=!0},p:ar,i(p){K||(pl(V.$$.fragment,p),K=!0)},o(p){vl(V.$$.fragment,p),K=!1},d(p){r(t),p&&r(s),p&&r(E),ml(V)}}}class Sl extends rl{constructor(t){super(),ll(this,t,null,yl,ol,{})}}export{Sl as default};
