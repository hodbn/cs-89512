import{S as rl,i as ll,s as ol,k as l,q as f,a as u,l as o,m as i,r as h,h as r,c,n,b as ts,D as e,J as Me,K as $,L as nl,u as ye,M as il,H as ar,N as al,O as D,P as dl,w as ul,y as cl,Q as gl,z as fl,A as hl,g as pl,d as vl,B as ml}from"../chunks/index.01a7223d.js";function tl(d,t,s){const E=d.slice();return E[48]=t[s],E[50]=s,E}function sl(d,t){let s,E,V;function K(){return t[30](t[50])}function p(){return t[31](t[50])}return{key:d,first:null,c(){s=l("div"),this.h()},l(b){s=o(b,"DIV",{class:!0}),i(s).forEach(r),this.h()},h(){var b,_,ee,P,U,N,R,B;n(s,"class","w-1.5 h-1.5"),D(s,"bg-white",t[48]===void 0),D(s,"bg-gray-100",((b=t[48])==null?void 0:b.kind)===t[15].S1&&!t[48].willGossip),D(s,"bg-gray-200",((_=t[48])==null?void 0:_.kind)===t[15].S2&&!t[48].willGossip),D(s,"bg-gray-300",((ee=t[48])==null?void 0:ee.kind)===t[15].S3&&!t[48].willGossip),D(s,"bg-gray-400",((P=t[48])==null?void 0:P.kind)===t[15].S4&&!t[48].willGossip),D(s,"bg-red-300",((U=t[48])==null?void 0:U.kind)===t[15].S1&&t[48].willGossip),D(s,"bg-red-400",((N=t[48])==null?void 0:N.kind)===t[15].S2&&t[48].willGossip),D(s,"bg-red-500",((R=t[48])==null?void 0:R.kind)===t[15].S3&&t[48].willGossip),D(s,"bg-red-600",((B=t[48])==null?void 0:B.kind)===t[15].S4&&t[48].willGossip),this.first=s},m(b,_){ts(b,s,_),E||(V=[$(s,"mouseover",K),$(s,"focus",p)],E=!0)},p(b,_){var ee,P,U,N,R,B,F,Y;t=b,_[0]&32&&D(s,"bg-white",t[48]===void 0),_[0]&32800&&D(s,"bg-gray-100",((ee=t[48])==null?void 0:ee.kind)===t[15].S1&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-200",((P=t[48])==null?void 0:P.kind)===t[15].S2&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-300",((U=t[48])==null?void 0:U.kind)===t[15].S3&&!t[48].willGossip),_[0]&32800&&D(s,"bg-gray-400",((N=t[48])==null?void 0:N.kind)===t[15].S4&&!t[48].willGossip),_[0]&32800&&D(s,"bg-red-300",((R=t[48])==null?void 0:R.kind)===t[15].S1&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-400",((B=t[48])==null?void 0:B.kind)===t[15].S2&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-500",((F=t[48])==null?void 0:F.kind)===t[15].S3&&t[48].willGossip),_[0]&32800&&D(s,"bg-red-600",((Y=t[48])==null?void 0:Y.kind)===t[15].S4&&t[48].willGossip)},d(b){b&&r(s),E=!1,al(V)}}}function bl(d){var cr;let t,s,E,V,K,p,b,_,ee,P,U,N,R,B,F,Y,A,Oe,J,X,we,Q,L,Se,te,M,O,ce,ge,W,Tt,C,Te,Ie,xe,fe,he=d[14]===d[17].ALIVE?"Alive":"Ended",Fe,It,Ue,re,Be=d[14]===d[17].INITIAL?"Start":"Restart",Je,xt,se,Ge,Gt,kt,pe,je=(d[1]*100).toFixed(2)+"",a,S,I,w,y,x,G,j,ve,m,k,le,ke,ss,me,Xe,rs,ls,Qe,Lt,os,Dt,oe,ns,Ct,as,be,We,is,ds,Ye,De,ne,us,Ze,cs,gs,Vt,ae,Nt=d[12]?"Pause":"Run",Ht,Pt,fs,_e,$e,hs,ps,et,Mt,vs,Ot,ms,Ee,tt,bs,_s,Ve,Rt=(((cr=d[5][d[4]])==null?void 0:cr.kind)??"Empty")+"",Ut,Es,At=d[16](d[4])+"",Bt,ys,jt,ws,Ne,st,Ss,Ts,Re,Is,xs,Ae,Gs,Le,rt,ks,Ds,ze,Ce,Vs,Ns,He,Rs,As,qe,Ls,ie,lt,Cs,Hs,Pe,z,ot,Ps,Ms,nt,Os,Us,at,Bs,js,it,zs,qs,dt,Ks,Fs,q,ut,Js,Xs,ct,Qs,Ws,gt,Ys,Zs,ft,$s,er,ht,tr,sr,Ke,Z=[],ir=new Map,rr,dr,zt=d[5];const ur=g=>g[50];for(let g=0;g<zt.length;g+=1){let v=tl(d,zt,g),T=ur(v);ir.set(T,Z[g]=sl(T,v))}return{c(){t=l("div"),s=l("div"),E=l("h1"),V=f("Controls"),K=u(),p=l("table"),b=l("tr"),_=l("th"),ee=f("Game params"),P=u(),U=l("td"),N=l("div"),R=l("div"),B=l("span"),F=f("P ="),Y=u(),A=l("input"),Oe=u(),J=l("div"),X=l("span"),we=f("L ="),Q=u(),L=l("input"),Se=u(),te=l("td"),M=l("div"),O=l("span"),ce=f("MaxGen ="),ge=u(),W=l("input"),Tt=u(),C=l("tr"),Te=l("th"),Ie=f("Game state"),xe=u(),fe=l("td"),Fe=f(he),It=u(),Ue=l("td"),re=l("button"),Je=f(Be),xt=u(),se=l("tr"),Ge=l("th"),Gt=f("Exposure rate"),kt=u(),pe=l("td"),a=f(je),S=f("%"),I=u(),w=l("td"),y=u(),x=l("tr"),G=l("th"),j=f("Game number"),ve=u(),m=l("td"),k=f(d[3]),le=u(),ke=l("td"),ss=u(),me=l("tr"),Xe=l("th"),rs=f("Generation"),ls=u(),Qe=l("td"),Lt=f(d[2]),os=u(),Dt=l("td"),oe=l("button"),ns=f("Single step"),as=u(),be=l("tr"),We=l("th"),is=f("Run interval"),ds=u(),Ye=l("td"),De=l("div"),ne=l("input"),us=u(),Ze=l("span"),cs=f("ms"),gs=u(),Vt=l("td"),ae=l("button"),Ht=f(Nt),fs=u(),_e=l("tr"),$e=l("th"),hs=f("Active gossipers"),ps=u(),et=l("td"),Mt=f(d[0]),vs=u(),Ot=l("td"),ms=u(),Ee=l("tr"),tt=l("th"),bs=f("Selected cell"),_s=u(),Ve=l("td"),Ut=f(Rt),Es=u(),Bt=f(At),ys=u(),jt=l("td"),ws=u(),Ne=l("div"),st=l("h1"),Ss=f("Message log"),Ts=u(),Re=l("button"),Is=f("Clear"),xs=u(),Ae=l("textarea"),Gs=u(),Le=l("div"),rt=l("h1"),ks=f("Last game result"),Ds=u(),ze=l("div"),Ce=l("button"),Vs=f("Copy"),Ns=u(),He=l("button"),Rs=f("Clear"),As=u(),qe=l("textarea"),Ls=u(),ie=l("div"),lt=l("h1"),Cs=f("Legend"),Hs=u(),Pe=l("div"),z=l("div"),ot=l("div"),Ps=f("General population:"),Ms=u(),nt=l("div"),Os=f("S1"),Us=u(),at=l("div"),Bs=f("S2"),js=u(),it=l("div"),zs=f("S3"),qs=u(),dt=l("div"),Ks=f("S4"),Fs=u(),q=l("div"),ut=l("div"),Js=f("Gossipers:"),Xs=u(),ct=l("div"),Qs=f("S1"),Ws=u(),gt=l("div"),Ys=f("S2"),Zs=u(),ft=l("div"),$s=f("S3"),er=u(),ht=l("div"),tr=f("S4"),sr=u(),Ke=l("div");for(let g=0;g<Z.length;g+=1)Z[g].c();this.h()},l(g){t=o(g,"DIV",{class:!0});var v=i(t);s=o(v,"DIV",{class:!0});var T=i(s);E=o(T,"H1",{class:!0});var gr=i(E);V=h(gr,"Controls"),gr.forEach(r),K=c(T),p=o(T,"TABLE",{class:!0});var H=i(p);b=o(H,"TR",{});var pt=i(b);_=o(pt,"TH",{class:!0});var fr=i(_);ee=h(fr,"Game params"),fr.forEach(r),P=c(pt),U=o(pt,"TD",{class:!0});var hr=i(U);N=o(hr,"DIV",{class:!0});var qt=i(N);R=o(qt,"DIV",{class:!0});var Kt=i(R);B=o(Kt,"SPAN",{class:!0});var pr=i(B);F=h(pr,"P ="),pr.forEach(r),Y=c(Kt),A=o(Kt,"INPUT",{type:!0,class:!0,placeholder:!0}),Kt.forEach(r),Oe=c(qt),J=o(qt,"DIV",{class:!0});var Ft=i(J);X=o(Ft,"SPAN",{class:!0});var vr=i(X);we=h(vr,"L ="),vr.forEach(r),Q=c(Ft),L=o(Ft,"INPUT",{type:!0,class:!0,placeholder:!0}),Ft.forEach(r),qt.forEach(r),hr.forEach(r),Se=c(pt),te=o(pt,"TD",{});var mr=i(te);M=o(mr,"DIV",{class:!0});var Jt=i(M);O=o(Jt,"SPAN",{class:!0});var br=i(O);ce=h(br,"MaxGen ="),br.forEach(r),ge=c(Jt),W=o(Jt,"INPUT",{type:!0,class:!0,placeholder:!0}),Jt.forEach(r),mr.forEach(r),pt.forEach(r),Tt=c(H),C=o(H,"TR",{});var vt=i(C);Te=o(vt,"TH",{class:!0});var _r=i(Te);Ie=h(_r,"Game state"),_r.forEach(r),xe=c(vt),fe=o(vt,"TD",{class:!0});var Er=i(fe);Fe=h(Er,he),Er.forEach(r),It=c(vt),Ue=o(vt,"TD",{});var yr=i(Ue);re=o(yr,"BUTTON",{type:!0,class:!0});var wr=i(re);Je=h(wr,Be),wr.forEach(r),yr.forEach(r),vt.forEach(r),xt=c(H),se=o(H,"TR",{});var mt=i(se);Ge=o(mt,"TH",{class:!0});var Sr=i(Ge);Gt=h(Sr,"Exposure rate"),Sr.forEach(r),kt=c(mt),pe=o(mt,"TD",{class:!0});var lr=i(pe);a=h(lr,je),S=h(lr,"%"),lr.forEach(r),I=c(mt),w=o(mt,"TD",{}),i(w).forEach(r),mt.forEach(r),y=c(H),x=o(H,"TR",{});var bt=i(x);G=o(bt,"TH",{class:!0});var Tr=i(G);j=h(Tr,"Game number"),Tr.forEach(r),ve=c(bt),m=o(bt,"TD",{class:!0});var Ir=i(m);k=h(Ir,d[3]),Ir.forEach(r),le=c(bt),ke=o(bt,"TD",{}),i(ke).forEach(r),bt.forEach(r),ss=c(H),me=o(H,"TR",{});var _t=i(me);Xe=o(_t,"TH",{class:!0});var xr=i(Xe);rs=h(xr,"Generation"),xr.forEach(r),ls=c(_t),Qe=o(_t,"TD",{class:!0});var Gr=i(Qe);Lt=h(Gr,d[2]),Gr.forEach(r),os=c(_t),Dt=o(_t,"TD",{});var kr=i(Dt);oe=o(kr,"BUTTON",{type:!0,class:!0});var Dr=i(oe);ns=h(Dr,"Single step"),Dr.forEach(r),kr.forEach(r),_t.forEach(r),as=c(H),be=o(H,"TR",{});var Et=i(be);We=o(Et,"TH",{class:!0});var Vr=i(We);is=h(Vr,"Run interval"),Vr.forEach(r),ds=c(Et),Ye=o(Et,"TD",{class:!0});var Nr=i(Ye);De=o(Nr,"DIV",{class:!0});var Xt=i(De);ne=o(Xt,"INPUT",{type:!0,class:!0,placeholder:!0}),us=c(Xt),Ze=o(Xt,"SPAN",{class:!0});var Rr=i(Ze);cs=h(Rr,"ms"),Rr.forEach(r),Xt.forEach(r),Nr.forEach(r),gs=c(Et),Vt=o(Et,"TD",{});var Ar=i(Vt);ae=o(Ar,"BUTTON",{type:!0,class:!0});var Lr=i(ae);Ht=h(Lr,Nt),Lr.forEach(r),Ar.forEach(r),Et.forEach(r),fs=c(H),_e=o(H,"TR",{});var yt=i(_e);$e=o(yt,"TH",{class:!0});var Cr=i($e);hs=h(Cr,"Active gossipers"),Cr.forEach(r),ps=c(yt),et=o(yt,"TD",{class:!0});var Hr=i(et);Mt=h(Hr,d[0]),Hr.forEach(r),vs=c(yt),Ot=o(yt,"TD",{}),i(Ot).forEach(r),yt.forEach(r),ms=c(H),Ee=o(H,"TR",{});var wt=i(Ee);tt=o(wt,"TH",{class:!0});var Pr=i(tt);bs=h(Pr,"Selected cell"),Pr.forEach(r),_s=c(wt),Ve=o(wt,"TD",{class:!0});var Qt=i(Ve);Ut=h(Qt,Rt),Es=c(Qt),Bt=h(Qt,At),Qt.forEach(r),ys=c(wt),jt=o(wt,"TD",{}),i(jt).forEach(r),wt.forEach(r),H.forEach(r),ws=c(T),Ne=o(T,"DIV",{class:!0});var Wt=i(Ne);st=o(Wt,"H1",{class:!0});var Mr=i(st);Ss=h(Mr,"Message log"),Mr.forEach(r),Ts=c(Wt),Re=o(Wt,"BUTTON",{type:!0,class:!0});var Or=i(Re);Is=h(Or,"Clear"),Or.forEach(r),Wt.forEach(r),xs=c(T),Ae=o(T,"TEXTAREA",{class:!0}),i(Ae).forEach(r),Gs=c(T),Le=o(T,"DIV",{class:!0});var Yt=i(Le);rt=o(Yt,"H1",{class:!0});var Ur=i(rt);ks=h(Ur,"Last game result"),Ur.forEach(r),Ds=c(Yt),ze=o(Yt,"DIV",{});var Zt=i(ze);Ce=o(Zt,"BUTTON",{type:!0,class:!0});var Br=i(Ce);Vs=h(Br,"Copy"),Br.forEach(r),Ns=c(Zt),He=o(Zt,"BUTTON",{type:!0,class:!0});var jr=i(He);Rs=h(jr,"Clear"),jr.forEach(r),Zt.forEach(r),Yt.forEach(r),As=c(T),qe=o(T,"TEXTAREA",{class:!0}),i(qe).forEach(r),T.forEach(r),Ls=c(v),ie=o(v,"DIV",{class:!0});var St=i(ie);lt=o(St,"H1",{class:!0});var zr=i(lt);Cs=h(zr,"Legend"),zr.forEach(r),Hs=c(St),Pe=o(St,"DIV",{class:!0});var $t=i(Pe);z=o($t,"DIV",{class:!0});var de=i(z);ot=o(de,"DIV",{class:!0});var qr=i(ot);Ps=h(qr,"General population:"),qr.forEach(r),Ms=c(de),nt=o(de,"DIV",{class:!0});var Kr=i(nt);Os=h(Kr,"S1"),Kr.forEach(r),Us=c(de),at=o(de,"DIV",{class:!0});var Fr=i(at);Bs=h(Fr,"S2"),Fr.forEach(r),js=c(de),it=o(de,"DIV",{class:!0});var Jr=i(it);zs=h(Jr,"S3"),Jr.forEach(r),qs=c(de),dt=o(de,"DIV",{class:!0});var Xr=i(dt);Ks=h(Xr,"S4"),Xr.forEach(r),de.forEach(r),Fs=c($t),q=o($t,"DIV",{class:!0});var ue=i(q);ut=o(ue,"DIV",{class:!0});var Qr=i(ut);Js=h(Qr,"Gossipers:"),Qr.forEach(r),Xs=c(ue),ct=o(ue,"DIV",{class:!0});var Wr=i(ct);Qs=h(Wr,"S1"),Wr.forEach(r),Ws=c(ue),gt=o(ue,"DIV",{class:!0});var Yr=i(gt);Ys=h(Yr,"S2"),Yr.forEach(r),Zs=c(ue),ft=o(ue,"DIV",{class:!0});var Zr=i(ft);$s=h(Zr,"S3"),Zr.forEach(r),er=c(ue),ht=o(ue,"DIV",{class:!0});var $r=i(ht);tr=h($r,"S4"),$r.forEach(r),ue.forEach(r),$t.forEach(r),sr=c(St),Ke=o(St,"DIV",{class:!0});var el=i(Ke);for(let or=0;or<Z.length;or+=1)Z[or].l(el);el.forEach(r),St.forEach(r),v.forEach(r),this.h()},h(){n(E,"class","text-lg"),n(_,"class","text-start"),n(B,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(A,"type","text"),n(A,"class","block w-10 min-w-[2rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(A,"placeholder","Density"),n(R,"class","flex rounded-md shadow-sm flex-grow"),n(X,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(L,"type","text"),n(L,"class","block w-10 min-w-[1rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(L,"placeholder","Cooldown"),n(J,"class","flex rounded-md shadow-sm flex-grow"),n(N,"class","flex justify-between space-x-2"),n(U,"class","text-end"),n(O,"class","inline-flex items-center rounded-l-md border border-r-0 border-gray-300 px-3 text-gray-500 text-xs"),n(W,"type","number"),n(W,"class","block w-10 min-w-[3rem] flex-1 rounded-none rounded-r-md border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(W,"placeholder","Cooldown"),n(M,"class","flex rounded-md shadow-sm"),n(Te,"class","text-start"),n(fe,"class","text-end"),n(re,"type","button"),n(re,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(Ge,"class","text-start"),n(pe,"class","text-end"),n(G,"class","text-start"),n(m,"class","text-end"),n(Xe,"class","text-start"),n(Qe,"class","text-end"),n(oe,"type","button"),n(oe,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),oe.disabled=Ct=d[14]!==d[17].ALIVE,n(We,"class","text-start"),n(ne,"type","text"),n(ne,"class","block w-6 flex-1 rounded-none rounded-l-md text-end border-0 py-1.5 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),n(ne,"placeholder","interval"),n(Ze,"class","inline-flex items-center rounded-r-md border border-l-0 border-gray-300 px-3 text-gray-500 text-xs"),n(De,"class","flex rounded-md shadow-sm"),n(Ye,"class","text-end"),n(ae,"type","button"),n(ae,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),ae.disabled=Pt=d[14]!==d[17].ALIVE,n($e,"class","text-start"),n(et,"class","text-end"),n(tt,"class","text-start"),n(Ve,"class","text-end min-w-[6rem] font-mono"),n(p,"class","border-spacing-2 border-separate"),n(st,"class","text-lg"),n(Re,"type","button"),n(Re,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(Ne,"class","flex justify-between"),n(Ae,"class","h-full min-w-[30rem] font-mono flex-grow block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),Ae.value=d[10],n(rt,"class","text-lg"),n(Ce,"type","button"),n(Ce,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(He,"type","button"),n(He,"class","rounded bg-white px-2 py-1 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50"),n(Le,"class","flex justify-between"),n(qe,"class","h-full min-w-[30rem] font-mono flex-grow block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 text-xs"),qe.value=d[9],n(s,"class","flex flex-col space-y-2"),n(lt,"class","text-lg"),n(ot,"class","mr-2"),n(nt,"class","px-1 bg-gray-100"),n(at,"class","px-1 bg-gray-200"),n(it,"class","px-1 bg-gray-300"),n(dt,"class","px-1 bg-gray-400"),n(z,"class","flex"),n(ut,"class","mr-2"),n(ct,"class","px-1 bg-red-300"),n(gt,"class","px-1 bg-red-400"),n(ft,"class","px-1 bg-red-500"),n(ht,"class","px-1 bg-red-600"),n(q,"class","flex"),n(Pe,"class","flex space-x-4 text-sm"),n(Ke,"class","grid gap-0.5 grid-cols-[repeat(100,_minmax(0,_1fr))] grid-rows-[repeat(100,_minmax(0,_1fr))] bg-white border border-gray-500 shadow-xl text-xs"),n(ie,"class","flex flex-col space-y-2"),n(t,"class","w-full flex justify-between")},m(g,v){ts(g,t,v),e(t,s),e(s,E),e(E,V),e(s,K),e(s,p),e(p,b),e(b,_),e(_,ee),e(b,P),e(b,U),e(U,N),e(N,R),e(R,B),e(B,F),e(R,Y),e(R,A),Me(A,d[6]),e(N,Oe),e(N,J),e(J,X),e(X,we),e(J,Q),e(J,L),Me(L,d[7]),e(b,Se),e(b,te),e(te,M),e(M,O),e(O,ce),e(M,ge),e(M,W),Me(W,d[8]),e(p,Tt),e(p,C),e(C,Te),e(Te,Ie),e(C,xe),e(C,fe),e(fe,Fe),e(C,It),e(C,Ue),e(Ue,re),e(re,Je),e(p,xt),e(p,se),e(se,Ge),e(Ge,Gt),e(se,kt),e(se,pe),e(pe,a),e(pe,S),e(se,I),e(se,w),e(p,y),e(p,x),e(x,G),e(G,j),e(x,ve),e(x,m),e(m,k),e(x,le),e(x,ke),e(p,ss),e(p,me),e(me,Xe),e(Xe,rs),e(me,ls),e(me,Qe),e(Qe,Lt),e(me,os),e(me,Dt),e(Dt,oe),e(oe,ns),e(p,as),e(p,be),e(be,We),e(We,is),e(be,ds),e(be,Ye),e(Ye,De),e(De,ne),Me(ne,d[13]),e(De,us),e(De,Ze),e(Ze,cs),e(be,gs),e(be,Vt),e(Vt,ae),e(ae,Ht),e(p,fs),e(p,_e),e(_e,$e),e($e,hs),e(_e,ps),e(_e,et),e(et,Mt),e(_e,vs),e(_e,Ot),e(p,ms),e(p,Ee),e(Ee,tt),e(tt,bs),e(Ee,_s),e(Ee,Ve),e(Ve,Ut),e(Ve,Es),e(Ve,Bt),e(Ee,ys),e(Ee,jt),e(s,ws),e(s,Ne),e(Ne,st),e(st,Ss),e(Ne,Ts),e(Ne,Re),e(Re,Is),e(s,xs),e(s,Ae),d[29](Ae),e(s,Gs),e(s,Le),e(Le,rt),e(rt,ks),e(Le,Ds),e(Le,ze),e(ze,Ce),e(Ce,Vs),e(ze,Ns),e(ze,He),e(He,Rs),e(s,As),e(s,qe),e(t,Ls),e(t,ie),e(ie,lt),e(lt,Cs),e(ie,Hs),e(ie,Pe),e(Pe,z),e(z,ot),e(ot,Ps),e(z,Ms),e(z,nt),e(nt,Os),e(z,Us),e(z,at),e(at,Bs),e(z,js),e(z,it),e(it,zs),e(z,qs),e(z,dt),e(dt,Ks),e(Pe,Fs),e(Pe,q),e(q,ut),e(ut,Js),e(q,Xs),e(q,ct),e(ct,Qs),e(q,Ws),e(q,gt),e(gt,Ys),e(q,Zs),e(q,ft),e(ft,$s),e(q,er),e(q,ht),e(ht,tr),e(ie,sr),e(ie,Ke);for(let T=0;T<Z.length;T+=1)Z[T]&&Z[T].m(Ke,null);rr||(dr=[$(A,"input",d[25]),$(L,"input",d[26]),$(W,"input",d[27]),$(re,"click",d[18]),$(oe,"click",d[19]),$(ne,"input",d[28]),$(ae,"click",d[20]),$(Re,"click",d[21]),$(Ce,"click",d[23]),$(He,"click",d[22])],rr=!0)},p(g,v){var T;v[0]&64&&A.value!==g[6]&&Me(A,g[6]),v[0]&128&&L.value!==g[7]&&Me(L,g[7]),v[0]&256&&nl(W.value)!==g[8]&&Me(W,g[8]),v[0]&16384&&he!==(he=g[14]===g[17].ALIVE?"Alive":"Ended")&&ye(Fe,he),v[0]&16384&&Be!==(Be=g[14]===g[17].INITIAL?"Start":"Restart")&&ye(Je,Be),v[0]&2&&je!==(je=(g[1]*100).toFixed(2)+"")&&ye(a,je),v[0]&8&&ye(k,g[3]),v[0]&4&&ye(Lt,g[2]),v[0]&16384&&Ct!==(Ct=g[14]!==g[17].ALIVE)&&(oe.disabled=Ct),v[0]&8192&&ne.value!==g[13]&&Me(ne,g[13]),v[0]&4096&&Nt!==(Nt=g[12]?"Pause":"Run")&&ye(Ht,Nt),v[0]&16384&&Pt!==(Pt=g[14]!==g[17].ALIVE)&&(ae.disabled=Pt),v[0]&1&&ye(Mt,g[0]),v[0]&48&&Rt!==(Rt=(((T=g[5][g[4]])==null?void 0:T.kind)??"Empty")+"")&&ye(Ut,Rt),v[0]&16&&At!==(At=g[16](g[4])+"")&&ye(Bt,At),v[0]&1024&&(Ae.value=g[10]),v[0]&512&&(qe.value=g[9]),v[0]&32816&&(zt=g[5],Z=il(Z,v,ur,1,g,zt,ir,Ke,dl,sl,null,tl))},i:ar,o:ar,d(g){g&&r(t),d[29](null);for(let v=0;v<Z.length;v+=1)Z[v].d();rr=!1,al(dr)}}}const es=100,nr=100;function _l(d,t,s){const E=a=>a[Math.floor(a.length*Math.random())];var V=(a=>(a.S1="S1",a.S2="S2",a.S3="S3",a.S4="S4",a))(V||{});const K=a=>{const S=(G,j)=>{const ve=()=>Math.random()<j,m=le=>E(["S1","S2","S3","S4"]),k=le=>({kind:m(),willGossip:!1,cooldown:0,exposed:!1});return new Array(G).fill(void 0).map((le,ke)=>ve()?k():void 0)},I=G=>{const j=G.reduce((ve,m)=>m===void 0?ve:[...ve,m],[]);return E(j)},w=es*nr,y=S(w,a),x=I(y);return x.willGossip=!0,x.exposed=!0,y},p=a=>[a%es,Math.floor(a/nr)],b=a=>{const S=I=>I.toString().padStart(2," ");return`[${S(a[0])},${S(a[1])}]`},_=a=>b(p(a)),ee=a=>{const S=([G,j])=>G>=0&&j>=0&&G<es&&j<nr,I=([G,j])=>j*es+G,[w,y]=p(a);return[[w-1,y-1],[w,y-1],[w+1,y-1],[w-1,y+0],[w+1,y+0],[w-1,y+1],[w,y+1],[w+1,y+1]].filter(S).map(I)},P=a=>a!==void 0,U=(a,S)=>{const I={S1:1,S2:.6666666666666666,S3:.3333333333333333,S4:0},y=S?{S1:"S1",S2:"S1",S3:"S2",S4:"S3"}[a.kind]:a.kind;return I[y]},N=(a,S)=>P(a[S]),R=(a,S)=>Math.random()<=U(a,S>=2),B=(a,S)=>{const I=(m,k)=>P(m)&&m.willGossip?[k]:[],w=m=>ee(m).filter(ke=>N(a,ke)),y=(m,k,le)=>le===0?!1:(!m.willGossip||S===0)&&m.cooldown===0&&R(m,le),x=a.flatMap(I),G=x.flatMap(w),j=G.reduce((m,k)=>(m[k]=(m[k]||0)+1,m),{});return{nextState:a.map((m,k)=>P(m)?{...m,willGossip:y(m,k,j[k]??0),cooldown:x.includes(k)?S:Math.max(0,m.cooldown-1),exposed:m.exposed||G.includes(k)}:void 0),numGossipers:x.length}};let F=.5,Y=3,A=100,Oe=[],J="",{activeGossipers:X}=t,{exposureRate:we=0}=t,{generation:Q=0}=t,{gameNumber:L=0}=t,{selectedIndex:Se=0}=t,te=K(F),{playHandle:M=-1}=t,O="",ce;const ge=a=>{const S=`game=${L} gen=${Q} | ${a}`,I=10*1e3;if(O.length>I){const w=O.substr(-I),y=w.indexOf(`
`);y!==-1&&s(10,O=w.substr(y))}O!==""&&s(10,O+=`
`),s(10,O+=S),setTimeout(()=>{ce.scroll({top:ce.scrollHeight,behavior:"instant"})})},W=()=>{const{nextState:a,numGossipers:S}=B(te,Y),I=a.filter(P),w=I.length,y=I.filter(x=>x.exposed);s(1,we=y.length/w),Oe.push({generation:Q,numGossipers:S,totalExposed:y.length}),s(5,te=a),s(2,Q++,Q),setTimeout(()=>{ge(`active gossipers: ${X}`),(X===0||Q===A)&&(xe(!1),s(14,he=2),s(9,J=JSON.stringify({l:Y,p:F,totalPopulation:w,activeGossipers:X,generation:Q,maxGen:A,history:Oe},null,2)),Oe=[],ge("game ended"))})},Tt=()=>{s(3,L++,L),s(2,Q=0),s(1,we=0),s(5,te=K(F)),ge("game restarted")};let C;const Te=()=>{ge(C===!0?"game paused":"game continued"),xe(!C)};let Ie=500;const xe=a=>{a===!0?C||s(24,M=setInterval(()=>{W()},Ie)):C&&(clearInterval(M),s(24,M=-1))};var fe=(a=>(a[a.INITIAL=0]="INITIAL",a[a.ALIVE=1]="ALIVE",a[a.END=2]="END",a))(fe||{});let he=1;const Fe=()=>{xe(!1),Tt(),s(14,he=1)},It=()=>{xe(!1),W()},Ue=()=>{Te()},re=()=>{s(10,O="")},Be=()=>{s(9,J="")},Je=()=>{navigator.clipboard.writeText(J)};function xt(){F=this.value,s(6,F)}function se(){Y=this.value,s(7,Y)}function Ge(){A=nl(this.value),s(8,A)}function Gt(){Ie=this.value,s(13,Ie)}function kt(a){ul[a?"unshift":"push"](()=>{ce=a,s(11,ce)})}const pe=a=>{s(4,Se=a)},je=a=>{s(4,Se=a)};return d.$$set=a=>{"activeGossipers"in a&&s(0,X=a.activeGossipers),"exposureRate"in a&&s(1,we=a.exposureRate),"generation"in a&&s(2,Q=a.generation),"gameNumber"in a&&s(3,L=a.gameNumber),"selectedIndex"in a&&s(4,Se=a.selectedIndex),"playHandle"in a&&s(24,M=a.playHandle)},d.$$.update=()=>{d.$$.dirty[0]&32&&s(0,X=te.filter(a=>P(a)&&a.willGossip===!0).length),d.$$.dirty[0]&16777216&&s(12,C=M!==-1)},[X,we,Q,L,Se,te,F,Y,A,J,O,ce,C,Ie,he,V,_,fe,Fe,It,Ue,re,Be,Je,M,xt,se,Ge,Gt,kt,pe,je]}class El extends rl{constructor(t){super(),ll(this,t,_l,bl,ol,{activeGossipers:0,exposureRate:1,generation:2,gameNumber:3,selectedIndex:4,playHandle:24},null,[-1,-1])}}function yl(d){let t,s,E,V,K;return V=new El({}),{c(){t=l("link"),s=u(),E=l("section"),cl(V.$$.fragment),this.h()},l(p){const b=gl("svelte-tqzk4c",document.head);t=o(b,"LINK",{rel:!0,href:!0}),b.forEach(r),s=c(p),E=o(p,"SECTION",{class:!0});var _=i(E);fl(V.$$.fragment,_),_.forEach(r),this.h()},h(){document.title="Game of Gossip",n(t,"rel","stylesheet"),n(t,"href","https://rsms.me/inter/inter.css"),n(E,"class","svelte-7w87tm")},m(p,b){e(document.head,t),ts(p,s,b),ts(p,E,b),hl(V,E,null),K=!0},p:ar,i(p){K||(pl(V.$$.fragment,p),K=!0)},o(p){vl(V.$$.fragment,p),K=!1},d(p){r(t),p&&r(s),p&&r(E),ml(V)}}}class Sl extends rl{constructor(t){super(),ll(this,t,null,yl,ol,{})}}export{Sl as default};
